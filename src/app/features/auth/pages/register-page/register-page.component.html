<app-auth-card [title]="'Criar conta'" [subtitle]="'Preencha os dados para continuar'">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-slate-700">Nome de usuário*</label>
                <input type="text" formControlName="username" autocomplete="username"
                    placeholder="Digite seu nome de usuário"
                    class="mt-1 w-full rounded-xl border border-slate-300 bg-slate-50 px-3 py-2 outline-none focus:ring-2 focus:ring-lime-500 placeholder:text-slate-400 placeholder:text-sm" />

                @if (form.controls['username'].invalid) {
                <p class="mt-1 text-sm text-red-600">{{ getFieldError(form, 'username') }}</p>
                }

            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700">E-mail*</label>
                <input type="email" formControlName="email" autocomplete="email" placeholder="Digite seu e-mail"
                    class="mt-1 w-full rounded-xl border border-slate-300 bg-slate-50 px-3 py-2 outline-none focus:ring-2 focus:ring-lime-500 placeholder:text-slate-400 placeholder:text-sm" />

                @if (!form.controls['email'].valid) {
                <p class="mt-1 text-sm text-red-600">{{ getFieldError(form, 'email') }}</p>
                }
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-slate-700">Telefone*</label>
                <input type="tel" formControlName="phone" placeholder="(11) 91234-5678" autocomplete="tel"
                    class="mt-1 w-full rounded-xl border border-slate-300 bg-slate-50 px-3 py-2 outline-none focus:ring-2 focus:ring-lime-500 placeholder:text-slate-400 placeholder:text-sm" />

                @if (!form.controls['phone'].valid) {
                <p class="mt-1 text-sm text-red-600">{{ getFieldError(form, 'phone') }}</p>
                }
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700">Senha*</label>
                <input type="password" formControlName="password" autocomplete="new-password"
                    placeholder="Digite sua senha"
                    class="mt-1 w-full rounded-xl border border-slate-300 bg-slate-50 px-3 py-2 outline-none focus:ring-2 focus:ring-lime-500 placeholder:text-slate-400 placeholder:text-sm" />

                @if (!form.controls['password'].valid) {
                <p class="mt-1 text-sm text-red-600">{{ getFieldError(form, 'password') }}</p>
                }
            </div>
        </div>

        <div>
            <label class="block text-sm font-medium text-slate-700">Confirmar senha*</label>
            <input type="password" formControlName="confirmPassword" autocomplete="new-password"
                placeholder="Digite sua senha novamente"
                class="mt-1 w-full rounded-xl border border-slate-300 bg-slate-50 px-3 py-2 outline-none focus:ring-2 focus:ring-lime-500 placeholder:text-slate-400 placeholder:text-sm" />

            @if (form.errors?.['passwordsDontMatch']) {
            <p class="mt-1 text-sm text-red-600">
                As senhas não coincidem.
            </p>
            }
        </div>
        <button type="submit" [disabled]="loading() || !form.valid"
            class="w-full rounded-xl bg-lime-500 hover:bg-lime-600 text-white font-medium py-2 transition disabled:opacity-50 disabled:pointer-events-none">
            {{ loading() ? 'Criando conta...' : 'Cadastrar' }}
        </button>
        <p class="text-center text-sm text-slate-600">Já possui conta?
            <a routerLink="/auth/entrar" class="text-lime-700 hover:underline">Entrar</a>
        </p>
    </form>
</app-auth-card>