<div class="mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
    <div class="relative w-full sm:max-w-md">
        <lucide-icon [name]="icons.search" [size]="18"
            class="absolute left-2 top-3 -translate-y-1/2 text-gray-400"></lucide-icon>
        <input type="text" placeholder="Buscar por título…"
            class="mt-1 w-full rounded-xl border border-slate-300 bg-slate-50 px-10 py-2 outline-none placeholder:text-slate-400 placeholder:text-sm"
            [formControl]="searchCtrl" />

        @if (searchCtrl) {
        <button type="button" (click)="clearSearch()"
            class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600">
            <lucide-icon [name]="icons.clear" [size]="16"></lucide-icon>
        </button>
        }
    </div>

    <div class="flex items-center gap-2">
        <button type="button" class="px-3 py-2 rounded-md border text-sm flex items-center gap-2 transition-colors"
            [ngClass]="view()==='cards' ? 'bg-gray-900 text-white border-gray-900' : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'"
            (click)="setView('cards')" [attr.aria-pressed]="view()==='cards'">
            <lucide-icon [name]="icons.grid" [size]="16"></lucide-icon>
            <span>Cards</span>
        </button>

        <button type="button" class="px-3 py-2 rounded-md border text-sm flex items-center gap-2 transition-colors"
            [ngClass]="view()==='table' ? 'bg-gray-900 text-white border-gray-900' : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'"
            (click)="setView('table')" [attr.aria-pressed]="view()==='table'">
            <lucide-icon [name]="icons.table" [size]="16"></lucide-icon>
            <span>Tabela</span>
        </button>
    </div>
</div>

@if (view()==='cards') {
<section class="grid gap-4 sm:gap-5 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    @if (!loading() && events().length) {

    @for (item of events(); track $index) {
    <app-event-card [event]="item" (remove)="deleteEvent(item)"></app-event-card>
    }

    } @else if (loading()) {
    <div class="col-span-full py-10 text-center text-sm text-gray-500">Carregando…</div>
    } @else {
    <div class="col-span-full py-10 text-center text-sm text-gray-500">Nenhum evento encontrado.</div>
    }
</section>
} @else {
<app-events-table [events]="events()" (remove)="deleteEvent($event)">
</app-events-table>
}

<p-paginator styleClass="mt-4" [rows]="rows()" [totalRecords]="total()" [first]="page() * rows()"
    [rowsPerPageOptions]="[8,12,16,24]" [showCurrentPageReport]="true"
    currentPageReportTemplate="Mostrando {first}-{last} de {totalRecords}" (onPageChange)="onPageChange($event)">
</p-paginator>